# PTA计时器浏览器插件

这是一个专为PTA（拼题A）平台设计的浏览器插件，可以自动计时题目解答时间。

## 功能特性

- 🕐 **自动计时**: 打开PTA题目页面时自动开始计时
- ⏸️ **暂停/继续**: 可以暂停和继续计时（支持正计时和倒计时）
- 🔄 **重置计时**: 一键重置当前计时（修复版）
- ⏰ **倒计时功能**: 设置自定义倒计时，支持暂停/继续
- 📌 **固定界面**: 计时器界面可以固定在浏览器上，不会随页面滚动
- 🖱️ **拖动功能**: 未固定时可以拖动计时器到任意位置
- 📱 **小巧界面**: 白色背景，简洁设计，不遮挡做题界面
- 💾 **数据持久化**: 自动保存计时数据到本地存储
- 🔄 **实时更新**: 实时显示当前计时状态
- 🎯 **智能检测**: 只在包含"problem"的URL中触发计时

## 安装方法

### Chrome浏览器

1. 下载或克隆此项目到本地
2. 打开Chrome浏览器，进入扩展程序页面：
   - 在地址栏输入：`chrome://extensions/`
   - 或者点击菜单 → 更多工具 → 扩展程序
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 插件安装完成！

### Edge浏览器

1. 下载或克隆此项目到本地
2. 打开Edge浏览器，进入扩展程序页面：
   - 在地址栏输入：`edge://extensions/`
   - 或者点击菜单 → 扩展
3. 开启左下角的"开发人员模式"
4. 点击"加载解压缩的扩展"
5. 选择项目文件夹
6. 插件安装完成！

## 使用方法

### 基本使用

1. 安装插件后，访问PTA平台
2. 进入任何包含"problem"的URL页面（如题目页面、考试页面等）
3. 插件会自动开始计时，并在页面右上角显示小巧的计时器界面
4. 离开题目页面时，计时会自动停止并保存

### 支持的页面类型

插件会在以下类型的页面中自动触发计时：
- 题目页面：包含"problem"的URL
- 考试页面：包含"problem"的URL
- 练习页面：包含"problem"的URL

### 计时器控制

1. **暂停/继续**: 点击⏸️按钮暂停计时，点击▶️按钮继续计时
   - 支持正计时和倒计时的暂停/继续
   - 倒计时暂停时会保持剩余时间不变
2. **重置计时**: 点击🔄按钮重置当前计时（会重新开始计时并清除倒计时）
3. **倒计时**: 点击⏰按钮设置倒计时
4. **固定界面**: 点击📌图标固定计时器，点击📍图标取消固定
5. **拖动功能**: 未固定时可以直接拖动计时器到任意位置
6. **关闭界面**: 点击×按钮隐藏计时器界面

### 拖动功能

1. **拖动操作**:
   - 未固定时，鼠标悬停在计时器上会显示移动光标
   - 点击并拖动计时器可以移动到任意位置
   - 拖动时会显示半透明效果，释放后恢复正常
   - 位置会自动保存，下次打开时恢复

2. **固定状态**:
   - 点击📌按钮固定计时器，此时不能拖动
   - 固定后计时器会显示蓝色边框
   - 点击📍按钮取消固定，恢复拖动功能

3. **边界限制**:
   - 拖动时会自动限制在浏览器窗口内
   - 不会超出屏幕边界

### 倒计时功能

1. **设置倒计时**:
   - 在计时器界面点击⏰按钮
   - 在弹窗中输入时间并点击"开始"按钮
   - 倒计时会显示在正计时的位置

2. **倒计时控制**:
   - 倒计时运行时，⏸️按钮可以暂停倒计时
   - 暂停后点击▶️按钮继续倒计时
   - 倒计时和正计时共用同一个暂停/继续按钮

3. **倒计时提醒**:
   - 剩余10分钟时显示黄色警告
   - 剩余5分钟时显示红色警告并闪烁
   - 时间到时显示浏览器通知

### 插件弹窗

1. 点击浏览器工具栏中的插件图标
2. 在弹窗中可以查看：
   - 当前题目时间
   - 倒计时设置和状态
   - 最近的解题记录
3. 可以设置倒计时、重置计时或清除所有数据

## 界面特点

- **小巧设计**: 界面宽度仅180px，高度约100px
- **白色背景**: 不会干扰做题，与页面融合
- **统一显示**: 倒计时和正计时显示在同一位置
- **固定功能**: 可以固定在浏览器右上角，不随页面滚动
- **拖动功能**: 未固定时可以自由拖动到任意位置
- **颜色提醒**: 倒计时时间紧迫时变色提醒

## 文件结构

```
pta-timer/
├── manifest.json          # 插件配置文件
├── background.js          # 后台脚本
├── content.js             # 内容脚本
├── popup.html             # 弹窗界面
├── popup.js               # 弹窗脚本
├── styles.css             # 样式文件
├── icons/                 # 图标文件夹
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md              # 说明文件
```

## 技术特性

- 使用Chrome Extension Manifest V3
- 支持Chrome、Edge等基于Chromium的浏览器
- 响应式设计，适配不同屏幕尺寸
- 本地存储，保护用户隐私
- 实时数据同步
- 界面固定功能，提升用户体验
- 智能URL检测，只在题目页面触发
- 倒计时功能，支持暂停/继续和通知提醒

## 更新日志

### v1.7
- 新增拖动功能，未固定时可以拖动计时器到任意位置
- 拖动位置会自动保存，下次打开时恢复
- 优化拖动体验，添加视觉反馈效果
- 改进固定/取消固定的交互逻辑
- 确保拖动功能与按钮点击不冲突

### v1.6
- 修复正计时暂停/继续功能，现在可以正确暂停和恢复计时
- 优化暂停时间计算逻辑，确保计时准确性
- 添加调试信息，便于问题排查
- 改进状态管理，确保暂停状态正确同步

### v1.5
- 倒计时现在显示在正计时的位置，界面更简洁
- 暂停/继续按钮现在可以控制倒计时
- 倒计时暂停时会保持剩余时间不变
- 重置计时时会同时清除倒计时
- 优化倒计时状态管理，提升用户体验

### v1.4
- 修复重置计时功能，现在可以正确重置并重新开始计时
- 添加倒计时功能，支持设置自定义时间
- 倒计时支持颜色提醒（黄色警告、红色危险）
- 倒计时结束时显示浏览器通知
- 改进最近记录模块的显示效果
- 优化界面布局，添加倒计时按钮

### v1.3
- 优化URL检测逻辑，只在包含"problem"的页面触发计时
- 改进题目ID提取算法，支持多种URL格式
- 在非题目页面自动隐藏计时器界面
- 提升检测准确性和用户体验

### v1.2
- 简化界面设计，移除倒计时功能
- 改用白色背景，界面更小巧
- 只保留暂停/继续和重置按钮
- 优化布局，减少对做题的干扰

### v1.1
- 移除总计时显示，简化界面
- 添加计时器界面固定功能
- 优化按钮布局和交互体验
- 改进倒计时警告效果

### v1.0
- 初始版本发布
- 支持自动计时功能
- 支持倒计时功能
- 支持数据统计和显示

## 注意事项

- 插件仅在PTA平台（pintia.cn）上工作
- 只在包含"problem"的URL页面中触发计时
- 计时数据保存在浏览器本地，清除浏览器数据会丢失记录
- 建议定期备份重要的计时数据
- 固定状态会保存在本地，重启浏览器后仍然有效
- 倒计时数据也会保存在本地，刷新页面后仍然有效
- 倒计时和正计时共用暂停/继续按钮

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个插件！ 